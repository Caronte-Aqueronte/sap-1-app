<div class="mt-10 mb-10 bg-white shadow-lg rounded-2xl p-8 border border-gray-200 w-full md:w-[75vw] mx-auto">
  <h3 class="text-xl font-bold text-[#012e5c] mb-6">Deja tu opinión</h3>

  <form nz-form [formGroup]="form" (ngSubmit)="submit()">
    <!-- national id -->
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Identificación</nz-form-label>
      <nz-form-control [nzSpan]="20" [nzErrorTip]="nidTpl">
        <input nz-input formControlName="nationalId" placeholder="Ingresa tu DPI/Número de identificación" />
        <ng-template #nidTpl let-control>
          @if (control.hasError('required')) { <span>El documento nacional es obligatorio</span> }
          @if (control.hasError('minlength') || control.hasError('maxlength')) { <span>El documento nacional debe tener 13 caracteres</span> }
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <!-- estrellas -->
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Valoración</nz-form-label>
      <nz-form-control [nzSpan]="20" nzErrorTip="Selecciona tu valoración">
        <nz-rate formControlName="rating"></nz-rate>
      </nz-form-control>
    </nz-form-item>

    <!-- comentario -->
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Comentario</nz-form-label>
      <nz-form-control [nzSpan]="20" nzErrorTip="El comentario no puede superar los 255 caracteres">
        <textarea nz-input formControlName="comment" rows="3" placeholder="Escribe tu comentario (opcional)" maxlength="255"></textarea>
        <div class="text-xs text-gray-500 mt-1 text-right">
          {{ form.get('comment')?.value?.length || 0 }}/255
        </div>
      </nz-form-control>
    </nz-form-item>

    <!-- botón enviar -->
    <nz-form-item>
      <nz-form-control [nzSpan]="24" class="flex justify-end">
        <button nz-button nzType="primary" [disabled]="!form.valid || submitting">
          {{ submitting ? 'Enviando…' : 'Enviar opinión' }}
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</div>

